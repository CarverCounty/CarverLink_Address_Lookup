<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>CarverLink!</title>
	<script id ="jjj" src="addy.csv"></script>
    <script src="https://js.arcgis.com/calcite-components/1.4.2/calcite.esm.js" type="module"></script>
    <link rel="stylesheet" href="https://js.arcgis.com/calcite-components/1.4.2/calcite.css" />

    <script src="https://js.arcgis.com/4.26/"></script>
    <link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css" />
  </head>
  <style>
    html,
    body,
    #viewDiv {
      padding: 0px;
      margin: 0;
      height: 100%;
      width: 100%;
    }
  </style>
  <body> 


	<calcite-shell content-behind >
  <calcite-combobox id="address-select" placeholder="Enter An Address!" selection-mode="single" on>
    <calcite-combobox-item value="Natural Resources" text-label="Natural Resources"></calcite-combobox-item>
    <calcite-combobox-item value="Agriculture" text-label="Agriculture"></calcite-combobox-item>
    <calcite-combobox-item value="Forestry" text-label="Forestry"></calcite-combobox-item>
    <calcite-combobox-item value="Mining" text-label="Mining"></calcite-combobox-item>
    <calcite-combobox-item value="Business" text-label="Business"></calcite-combobox-item>
    <calcite-combobox-item value="Education" text-label="Education"></calcite-combobox-item>
    <calcite-combobox-item value="Utilities" text-label="Utilities"></calcite-combobox-item>
    <calcite-combobox-item value="Transportation" text-label="Transportation"></calcite-combobox-item>
</calcite-combobox>

		<calcite-shell-panel slot="panel-start" display-mode="float">
		</calcite-shell-panel>
		<div id="viewDiv"></div>
	</calcite-shell>
  </body>
  <script>
    require([
      "esri/WebMap",
      "esri/views/MapView",
	  "esri/config"		  
    ], function(WebMap, MapView, esriConfig ) {
		<!-- esriConfig.apiKey = "YOUR_API_KEY"; -->
      const webmapId = new URLSearchParams(window.location.search).get("webmap")
        ?? "8f67432164eb4dcba08eef1d01dbbad7";

      const map = new WebMap({
        portalItem: {
          id: webmapId
        }
      });

	  const view = new MapView({
        map,
        container: "viewDiv",
        padding: {
          left: 49
        }
      });

	  view.when().then(function () { 
		  classSelect = document.getElementById("address-select");
		  console.log(classSelect);
		  classSelect.addEventListener("change", generateRenderer);
			console.log("AAA5");
		  const z = document.getElementById("jjj").text;
		  const z2 = z.split();
		  console.log("AAA6");	  
	  }); 
	  function generateRenderer() {              
          const fieldLabel = classSelect.selectedItems[0].innerText;
          console.info("change: ", fieldLabel)
	  }


    });
  </script>
  
  <script>
  window.addEventListener('load', () => {
  console.log("Boom!");
    const testComboBox = document.getElementById('address-select');     
    testComboBox.addEventListener("calciteComboboxChange", calciteComboboxChangeEvt => { 
	console.log("THSD");
	console.log(document.getElementById('address-select').value);
      <!-- const selectedItems = calciteComboboxChangeEvt.detail.selectedItems; -->
	  <!-- console.log(selectedItems); -->
      <!-- if(selectedItems.length){ -->
        <!-- const selectedValues = selectedItems.map(item=>item.value); -->
        <!-- console.log("calciteComboboxChange:", selectedValues.join(" | "));   -->
      <!-- } else { -->
        <!-- console.log("No selection...");  -->
      <!-- }       -->
    });     
    
  }, false);
</script>
</html>